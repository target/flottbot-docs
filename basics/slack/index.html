<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">

<head>
    <!-- 
    This code was adapted from mdBook (https://github.com/rust-lang-nursery/mdBook/),
    with additional modifications by Target Corporation, including:
    
    - moved file to use .html extension
    - updated template syntax to work with site generator used
    - removed path_to_root variable in js snippet
    - inlined menu (toc) content
    - modified navigation
    - removed jax-related content
    - removed theme js files
    
    The original Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0 (the “MPL”) and the
    copyright notice below. If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
    
    Copyright (c) 2018 [wirelyre wirelyre@gmail.com, Matt Ickstadt mattico8@gmail.com, cetra3 cetra3@hotmail.com, 
    Matt Brubeck mbrubeck@gmail.com, Sorin Davidoi sorin.davidoi@gmail.com, Michael Bryan michaelfbryan@gmail.com,
    Mario Nebl marionebl@users.noreply.github.com, Shane Nelson stgn@users.noreply.github.com, lifta42 lifta42@outlook.com, 
    projektir oprojektir@gmail.com, François mockersf@gmail.com, Mathieu David mathieudavid@mathieudavid.org]
    
    The modifications to the original Source Code Form subject to the terms of the MPL and distributed under the copyright notice below.
    Copyright (c) 2018 Target Brands, Inc. 
    -->
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Slack - Flottbot Documentation</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="shortcut icon" href="https://target.github.io/flottbot-docs/favicon.png">

    
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/variables.css">
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/general.css">
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/chrome.css">
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/print.css" media="print">
    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/highlight.css">
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/tomorrow-night.css">
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/ayu-highlight.css">
    

    <!-- Fonts -->
    <link rel="stylesheet" href="https://target.github.io/flottbot-docs/FontAwesome/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
        rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

    
    

    
    
</head>

<body class="light">
    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) {}
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try {
            theme = localStorage.getItem('mdbook-theme');
        } catch (e) {}
        if (theme === null || theme === undefined) {
            theme = 'ayu';
        }
        document.body.className = theme;
        document.querySelector('html').className = theme + ' js';
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try {
                sidebar = localStorage.getItem('mdbook-sidebar');
            } catch (e) {}
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        
        
        <nav role="navigation">
            <ul>
                
                
                
                
                <li >
                    
                    <strong><a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;about&#x2F;" class="subsection-title">
                            
                            What is Flottbot?
                        </a></strong>
                    
                </li>
                
                
                <li >
                    
                    <strong><a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;" class="subsection-title">
                            
                            Flottbot Basics
                        </a></strong>
                    
                    <ul>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;quick-start&#x2F;" class="page-title">
                                
                                Quick Start
                            </a>
                        </li>
                        
                        <li class="active" >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;slack&#x2F;" class="page-title">
                                
                                Slack
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;discord&#x2F;" class="page-title">
                                
                                Discord
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;customization&#x2F;" class="page-title">
                                
                                Customizing Your Bot
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li >
                    
                    <strong><a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;actions&#x2F;" class="subsection-title">
                            
                            Actions
                        </a></strong>
                    
                    <ul>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;actions&#x2F;http&#x2F;" class="page-title">
                                
                                HTTP
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;actions&#x2F;exec&#x2F;" class="page-title">
                                
                                exec
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;actions&#x2F;log&#x2F;" class="page-title">
                                
                                log
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;actions&#x2F;message&#x2F;" class="page-title">
                                
                                message
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li >
                    
                    <strong><a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;rules&#x2F;" class="subsection-title">
                            
                            Rules
                        </a></strong>
                    
                    <ul>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;rules&#x2F;anatomy&#x2F;" class="page-title">
                                
                                Anatomy of a Rule
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;rules&#x2F;variables&#x2F;" class="page-title">
                                
                                Variables
                            </a>
                        </li>
                        
                        <li >
                            <a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;rules&#x2F;example&#x2F;" class="page-title">
                                
                                Examples
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li >
                    
                    <strong><a href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;acknowledgements&#x2F;" class="subsection-title">
                            
                            Acknowledgements
                        </a></strong>
                    
                </li>
                
                
            </ul>
        </nav>
        
        
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
            <div id="menu-bar" class="menu-bar">
                <div id="menu-bar-sticky-container">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                            aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme"
                            aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu <span class="default">(default)</span></button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Flottbot Documentation</h1>
                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search for ..."
                        aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    
    <h1>Slack</h1>
    <h2 id="overview">Overview</h2>
<p>There are two basic ways you can run your bot on Slack with <em>flottbot</em>:</p>
<ul>
<li><strong>Socket Mode</strong> - see Slack's <a href="https://api.slack.com/apis/connections/socket#overview">Socket Mode Documentation</a></li>
<li><strong>Events API</strong> - see Slack's <a href="https://api.slack.com/apis/connections/events-api">Events API Documentation</a></li>
</ul>
<p>The basic difference is explained on Slack's <a href="https://api.slack.com/start/planning/choosing">Choosing the right APIs</a> page:</p>
<blockquote>
<p>With the Events API, you pick the events you’re interested in receiving and Slack will send them to an endpoint you specify via HTTP.</p>
</blockquote>
<blockquote>
<p>If you don't wish to expose a public, static HTTP endpoint to communicate with Slack, Socket Mode can help.</p>
</blockquote>
<p>For a more detailed differentiation you can check out Slack's <a href="https://api.slack.com/faq#answers-to-questions-were-often-asked.__events-api__when-should-i-use-the-events-api-and-when-should-i-use-socket-mode-or-the-rtm-api">&quot;When should I use the Events API and when should I use Socket Mode or the RTM API?&quot;</a> FAQ page on the topic.</p>
<p>In short, <em>Socket Mode</em> is great for local development and makes iterating on your bot's features much more convenient. Even beyond local development, it may be all you need to run your bot.</p>
<p>If you plan to eventually run multiple instances behind a load balancer due to your bots' needs, <em>Events API</em> is the way you want to go.</p>
<p>Fortunately, Slack makes it fairly trivial to toggle between the two modes.</p>
<h2 id="prepare-files-folder-structure">Prepare Files/Folder Structure</h2>
<p>Before we start, let's create a quick configuration for your bot. It will consist of a basic <strong>hello</strong> rule.</p>
<p>The typical directory structure for your bot is expected to look like:</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">./config/
├── rules/
│   └── hello.yml
└── bot.yml
</code></pre>
<p>Example <strong>hello</strong> rule to start with:</p>
<p><code>config/rules/hello.yml</code></p>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">name: hello
active: true
respond: hello

format_output: "what's up?"

help_text: hello
include_in_help: true
</code></pre>
<p>We'll assume the above is in place for the remainder of the page and we'll primarily modify <code>config/bot.yml</code> going forward.</p>
<h2 id="quick-setup">Quick Setup</h2>
<p>Slack recently released a beta version of <a href="https://api.slack.com/reference/manifests">app manifests</a> to help create new apps and bots more conveniently.</p>
<p><em>Note: it's possible this option doesn't exist for your workspace - continue to <a href="https://target.github.io/flottbot-docs/basics/slack/#setup">Setup</a>, if that's the case. You will be able to tell once you start creating a new app as described below.</em></p>
<p>Below is a prepared manifest that you can utilize to quickly setup your own new app/bot with Socket Mode enabled, cleverly named &quot;my-bot&quot;. It's a good starting point even if you eventually end up going down the Events API path. Don't worry, you can customize all the settings that this manifest provides after your bot has been created.</p>
<h3 id="app-manifest-for-a-bot-using-socket-mode">App Manifest for a Bot Using Socket Mode</h3>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">_metadata:
  major_version: 1
  minor_version: 1
display_information:
  name: my-bot
  description: my bot
  background_color: "#272a30"
features:
  app_home:
    home_tab_enabled: true
    messages_tab_enabled: true
    messages_tab_read_only_enabled: false
  bot_user:
    display_name: my-bot
    always_online: true
oauth_config:
  scopes:
    bot:
      - app_mentions:read
      - channels:history
      - channels:manage
      - channels:read
      - chat:write
      - groups:history
      - groups:read
      - groups:write
      - im:history
      - im:read
      - im:write
      - mpim:history
      - mpim:read
      - mpim:write
      - team:read
      - usergroups:read
      - users:read
      - users:read.email
      - users:write
      - reactions:read
      - reactions:write
settings:
  event_subscriptions:
    bot_events:
      - app_mention
      - member_joined_channel
      - member_left_channel
      - message.channels
      - message.groups
      - message.im
      - message.mpim
  interactivity:
    is_enabled: false
  org_deploy_enabled: false
  socket_mode_enabled: true
  is_hosted: false
</code></pre>
<p>To use this app manifest, follow these steps:</p>
<ol>
<li>Go to <a href="https://api.slack.com/apps">https://api.slack.com/apps</a></li>
<li>Hit the &quot;Create New App&quot; button in the top right of the page - a dialog will appear</li>
<li>Click on &quot;From an app manifest&quot;</li>
<li>On the following screen, pick your workspace and hit &quot;Next&quot;</li>
<li>Now review and paste the app manifest above into the text area in the dialog and hit &quot;Next&quot;</li>
<li>Here you can review the settings before hitting &quot;Create&quot; (don't worry you can make changes after creating the app). Click on &quot;Create&quot;</li>
<li>The dialog will close and you will be returned to your &quot;Basic Information&quot; page.</li>
</ol>
<p>At this point, your app has been created, but we're missing a couple of tokens that we need for your bot.</p>
<h3 id="tokens">Tokens</h3>
<p>On the &quot;Basic Information&quot; page, click on &quot;Install to Workspace&quot; and complete the directions.</p>
<p>Continue to <a href="https://target.github.io/flottbot-docs/basics/slack/#socket-mode-tokens">Socket Mode Tokens</a> to create and capture the necessary tokens to complete the setup.</p>
<h2 id="setup">Setup</h2>
<p>Got access to a Slack workspace? Great. Let's create a new app for your bot. The first few steps will be identical whether you are going with <em>Socket Mode</em> or <em>Events API</em>. In the <a href="https://target.github.io/flottbot-docs/basics/slack/#events-api">Events API section</a> we'll go over how to utilize, or switch to, the Events API.</p>
<p><em>Tip: there is a quicker way using Slack's new App Manifests feature, see <a href="https://target.github.io/flottbot-docs/basics/slack/#quick-setup">Quick Setup</a> for more information.</em></p>
<h3 id="create-slack-app">Create Slack App</h3>
<ol>
<li>Login to Slack and go to the <a href="https://api.slack.com/apps">Apps page</a>.</li>
<li>Click on the green &quot;Create New App&quot; button on the top right of the page. A &quot;Create A Slack App&quot; window should appear.</li>
<li>Enter your bot's name in the &quot;App Name&quot; section and select the desired workspace from the drop-down.</li>
<li>Click &quot;Create App&quot; at the bottom right corner of the window.</li>
<li>You should now be redirected to your bot's &quot;Basic Information&quot; page.</li>
</ol>
<h3 id="add-permissions">Add Permissions</h3>
<p>Now that your app is created, you will need to configure it. Let's start with permissions (called scopes in Slack):</p>
<ol>
<li>
<p>On the left-hand side of the page under &quot;Features&quot; heading, click on &quot;OAuth &amp; Permissions&quot;.</p>
</li>
<li>
<p>Scroll down to the &quot;Scopes&quot; section and in the &quot;Bot Token Scopes&quot; sub-section click on &quot;Add an OAuth scope&quot; and add the following scopes:</p>
<ul>
<li><code>app_mentions:read</code></li>
<li><code>channels:history</code></li>
<li><code>channels:manage</code></li>
<li><code>channels:read</code></li>
<li><code>chat:write</code></li>
<li><code>groups:history</code></li>
<li><code>groups:read</code></li>
<li><code>groups:write</code></li>
<li><code>im:history</code></li>
<li><code>im:read</code></li>
<li><code>im:write</code></li>
<li><code>mpim:history</code></li>
<li><code>mpim:read</code></li>
<li><code>mpim:write</code></li>
<li><code>team:read</code></li>
<li><code>usergroups:read</code></li>
<li><code>users:read</code></li>
<li><code>users:read.email</code></li>
<li><code>users:write</code></li>
<li><code>reactions:read</code></li>
<li><code>reactions:write</code></li>
</ul>
</li>
</ol>
<h3 id="subscribe-to-events">Subscribe to Events</h3>
<p>Next, let's tell Slack which events your bot should subscribe to:</p>
<ol>
<li>
<p>On the left-hand side of the page under the &quot;Features&quot; heading, click on &quot;Event Subscriptions&quot;.</p>
</li>
<li>
<p>Click the sliding toggle to turn &quot;Enable Events&quot; to &quot;On&quot;.</p>
</li>
<li>
<p>Ignore the &quot;Request URL&quot; for now and scroll down and expand &quot;Subscribe to bot events&quot;.</p>
</li>
<li>
<p>Click on &quot;Add Bot User Event&quot; and add the following events:</p>
<ul>
<li><code>app_mention</code></li>
<li><code>member_joined_channel</code></li>
<li><code>message.channels</code></li>
<li><code>message.groups</code></li>
<li><code>message.im</code></li>
<li><code>message.mpim</code></li>
</ul>
</li>
</ol>
<h3 id="customize-your-bot-name-and-display-options">Customize Your Bot Name and Display Options</h3>
<p>There are a couple of places where you can customize some basics about your bot, such as name and icon:</p>
<ol>
<li>
<p>App Home</p>
<ul>
<li>Under &quot;Features&quot; in the left-hand column, click on &quot;App Home&quot;.</li>
<li>Near the top, click on &quot;Edit&quot; to customize your bot name.</li>
<li>You might also want to toggle the &quot;Always Show My Bot as Online&quot; option to be enabled; however, that's up to your preference.</li>
</ul>
</li>
<li>
<p>Basic Information</p>
<ul>
<li>Under &quot;Settings&quot; in the left-hand column, click on &quot;Basic Information&quot;.</li>
<li>Towards the bottom of the page, you can customize the &quot;Display Information&quot; section, including setting an App Icon for your bot.</li>
</ul>
</li>
</ol>
<p>At this point, you're ready to make a call on whether you want to go with the <em>Socket Mode</em> or <em>Events API</em> setup. Let's start with <em>Socket Mode</em>.</p>
<h3 id="socket-mode-tokens">Socket Mode Tokens</h3>
<p>For Socket Mode, flottbot requires you to supply two tokens: <code>slack_token</code> and <code>slack_app_token</code>. Here's how to retrieve those tokens from Slack.</p>
<h4 id="slack-token"><code>slack_token</code></h4>
<ol>
<li>Scroll back up to the &quot;OAuth Tokens &amp; Redirect URLs&quot; section on <a href="https://api.slack.com">api.slack.com</a>, and click the now green &quot;Install App to Workspace&quot; button (it might say &quot;Reinstall to Workspace&quot;).</li>
<li>You should be prompted to &quot;Confirm your identity for you Workspace&quot;. Click the green &quot;Authorize&quot; button.</li>
<li>You should be redirected back to the &quot;OAuth &amp; Permissions&quot; page where you will now see a &quot;OAuth Tokens for Your Workspace&quot; section and your <code>slack_token</code> (bot token) which will always begin with <strong><code>xoxb-</code></strong>.</li>
</ol>
<h4 id="slack-app-token"><code>slack_app_token</code></h4>
<ol>
<li>In the left-hand menu under &quot;Settings&quot;, click on &quot;Socket Mode&quot;</li>
<li>In the &quot;Connect using Socket Mode section&quot;, slide the toggle for &quot;Enable Socket Mode&quot;</li>
<li>Pick and enter a token name in the window that appears. The name you choose does not seem to matter.</li>
<li>Click &quot;Generate&quot;</li>
<li>In the new window, a token starting with <strong><code>xapp-</code></strong> will appear. This is your <code>slack_app_token</code>.</li>
</ol>
<p>You will want to set these two tokens in your <code>/config/bot.yml</code>. For example:</p>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">chat_application: slack
slack_token: ${SLACK_TOKEN}
slack_app_token: ${SLACK_APP_TOKEN}
</code></pre>
<p><em>Note: the <code>${VAR}</code> syntax expects the values to be set in environment variables with their respective names.</em></p>
<h3 id="run-your-bot-socket-mode">Run Your Bot (Socket Mode)</h3>
<p>Now run your bot using docker with the following command (make sure docker is up and running):</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">docker run --rm --name mybot \
  --env SLACK_TOKEN=$SLACK_TOKEN \
  --env SLACK_APP_TOKEN=$SLACK_APP_TOKEN \
  -v "$PWD"/config:/config \
  target/flottbot:latest /flottbot
</code></pre>
<p><em>Note: this assumes that you have the tokens are available as environment variables in your environment at <code>SLACK_TOKEN</code> and <code>SLACK_APP_TOKEN</code>.</em></p>
<p>Your bot should now be online in the Slack Workspace you added the integration to.</p>
<p>Head to a channel in Slack and invite your bot. Type <code>@&lt;your bot name&gt; hello</code> (replace &quot;your bot name&quot; with the actual name of your bot) and you should get a response of &quot;what's up?&quot;).</p>
<p>Congrats!</p>
<h2 id="events-api">Events API</h2>
<p>Once you are set up with Socket Mode, you might not need anything else. However, in some circumstances you might decide to switch to use the Events API. The process is fairly straightforward. It will involve the following steps:</p>
<ol>
<li>Configure tokens</li>
<li>Setup a public ingress</li>
<li>Tweak your <code>bot.yml</code></li>
</ol>
<h3 id="configure-tokens">Configure tokens</h3>
<h4 id="slack-token-1"><code>slack_token</code></h4>
<p>Refer to <a href="https://target.github.io/flottbot-docs/basics/slack/#socket-mode">Socket Mode</a> on how to find your <code>SLACK_TOKEN</code>.</p>
<h4 id="slack-signing-secret"><code>slack_signing_secret</code></h4>
<ol>
<li>See the &quot;Basic Information&quot; page of your App at <a href="https://api.slack.com">api.slack.com</a></li>
<li>Under the &quot;App Credentials&quot; section, the token is under &quot;Signing Secret&quot;. Click on &quot;Show&quot; to display the value</li>
</ol>
<p>You will want to set these two tokens in your <code>/config/bot.yml</code>. For example:</p>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">chat_application: slack
slack_token: ${SLACK_TOKEN}
slack_signing_secret: ${SLACK_SIGNING_SECRET}
</code></pre>
<p><em>Note: the <code>${VAR}</code> syntax expects the values to be set in environment variables with their respective names.</em></p>
<h3 id="setup-your-slack-events-public-ingress">Setup Your Slack Events Public Ingress</h3>
<p>In order for the Slack events API to post back to your bot to notify it that certain events occurred, you'll need to deploy it with a publicly available URL.  Flottbot will by default serve up HTTP endpoints at a custom path you can configure in your <code>config/bot.yml</code>.</p>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">slack_events_callback_path: /slack_events/v1/events
</code></pre>
<p>If you're using our provided Docker image, it will expose the necessary ports for the HTTP server to accept requests and set up the custom path endpoints to accept Slack event payloads. You will just have to let Slack know where to reach it at.</p>
<p><em>Tip: flottbot also exposes a <code>/event_health</code> endpoint for checking liveliness.</em></p>
<p>Before configuring things inside of Slack, you'll want to make sure your bot is running, so Slack can verify the connection to your bot.</p>
<p>At this point, your <code>config/bot.yml</code> should look like:</p>
<p><code>config/bot.yml</code></p>
<pre data-lang="yaml" class="language-yaml "><code class="language-yaml" data-lang="yaml">name: mybot
chat_application: slack
slack_token: ${SLACK_TOKEN}
slack_signing_secret: ${SLACK_SIGNING_SECRET}
slack_events_callback_path: /slack_events/v1/events
</code></pre>
<p><em>Note: the <code>${VAR}</code> syntax expects the values to be set in environment variables with their respective names.</em></p>
<h3 id="run-your-bot-events-api">Run Your Bot (Events API)</h3>
<p>It's beyond this document to go into details on how and where to host your bot so it's publicly accessible.</p>
<p>If your environment allows (many corporate environments don't), <a href="https://ngrok.com/">ngrok</a> or similar tools ease the pain a little bit by allowing you to run it locally and exposing port(s) publicly via a tunnel.</p>
<p>For sake of simplicity, let's assume that you have your bot running at <code>https://example.com</code> for the remainder of this section.</p>
<p>In your bot configuration inside of Slack, ie. <a href="https://api.slack.com">api.slack.com</a>, define the &quot;Request URL&quot; by doing the following:</p>
<ol>
<li>head to the &quot;Events Subscription&quot; page</li>
<li>hit the &quot;Enable Events&quot; button to turn it on</li>
<li>paste in the URL that your bot is hosted at including the configured <code>slack_events_callback_path</code>, in our example's case the full URL would be: <code>https://example.com/slack_events/v1/events</code></li>
<li>if everything was done correctly you should get a green check mark.</li>
</ol>
<p><em>Note: you will also have to disable Socket Mode on the &quot;Socket Mode&quot; page, if you had that enabled previously.</em></p>
<p>Your bot should now be online in the Slack Workspace you added the integration to.</p>
<p>Head to a channel in Slack and invite your bot. Type <code>@&lt;your botname&gt; hello</code> (replace &quot;your botname&quot; with the actual name of your bot) and you should get a response of &quot;what's up?&quot;).</p>
<p>Congrats!</p>


                </main>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            
    
        <a class="previous" href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;quick-start&#x2F;"><i class="fa fa-angle-left"></i></a>
    


            
    
        <a class="next" href="https:&#x2F;&#x2F;target.github.io&#x2F;flottbot-docs&#x2F;basics&#x2F;discord&#x2F;"><i class="fa fa-angle-right"></i></a>
    

        </nav>

    </div>

    
    <script src="https://target.github.io/flottbot-docs/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/search_index.en.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/searcher.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://target.github.io/flottbot-docs/book.js" type="text/javascript" charset="utf-8"></script>
    
</body>

</html>
